/* veva_patch.css (CLEAN v2)
   Fixes:
   - Visitor altijd LINKS, Student altijd RECHTS (NO slot-based leakage)
   - Kleuren per SIDE (visitor lichtgrijs, student blauw) altijd consistent
   - Max 4 bubbles (slot0..slot3)
   - Layout: 50/50 boven/onder (chat boven, ID+hint onder)
   - ID card: volledig wit, groter, donkere tekst, geen full-width witte slab
*/

/* ============ 0) Max 4 bubbles ============ */
#slot4, #slot5 { display: none !important; }

/* ============ 1) Respect hidden attribute (geen lege rows bij start) ============ */
.msgRow[hidden], [hidden] { display: none !important; }

/* ============ 2) Vertical split (boven/onder 50/50) ============ */
.content{
  height: 100%;
  min-height: 0;
  display: flex !important;
  flex-direction: column !important;
}

/* Chat boven */
.chatArea{
  flex: 1 1 0 !important;
  min-height: 0 !important;
  overflow: auto !important;
}

/* ID/hint onder */
#idSlot, .idSlot{
  flex: 1 1 0 !important;
  min-height: 0 !important;
  overflow: auto !important;
  background: transparent !important;
}

/* Inputbar blijft onderaan */
.inputBar{
  flex: 0 0 auto !important;
}

/* ============ 3) ROW base ============ */
.chatArea .msgRow{
  display: flex !important;
  align-items: flex-start !important;
  gap: 14px !important;
  width: 100% !important;
  margin: 14px 0 !important;
}

/* ============================================================
   3A) Alignment ONLY by JS speaker classes: .isVisitor/.isStudent
   ============================================================ */

/* Visitor links */
.chatArea .msgRow.isVisitor{
  justify-content: flex-start !important;
  flex-direction: row !important;
}

/* Student rechts, avatar buiten (rechts) */
.chatArea .msgRow.isStudent{
  justify-content: flex-end !important;
  flex-direction: row !important;
}
.chatArea .msgRow.isStudent .avatar{ order: 2 !important; }
.chatArea .msgRow.isStudent .bubbleWrap{ order: 1 !important; }

/* Fallback (alleen als JS nog niets gezet heeft): gebruik de HTML class */
.chatArea .msgRow:not(.isVisitor):not(.isStudent).visitor{
  justify-content: flex-start !important;
  flex-direction: row !important;
}
.chatArea .msgRow:not(.isVisitor):not(.isStudent).student{
  justify-content: flex-end !important;
  flex-direction: row !important;
}
.chatArea .msgRow:not(.isVisitor):not(.isStudent).student .avatar{ order: 2 !important; }
.chatArea .msgRow:not(.isVisitor):not(.isStudent).student .bubbleWrap{ order: 1 !important; }

/* bubbleWrap */
.chatArea .msgRow .bubbleWrap{
  display: flex !important;
  flex-direction: column !important;
  max-width: min(720px, 70%) !important;
}

.chatArea .msgRow.isStudent .bubbleWrap{
  align-items: flex-end !important;
  text-align: right !important;
}
.chatArea .msgRow.isVisitor .bubbleWrap{
  align-items: flex-start !important;
  text-align: left !important;
}

/* Avatar */
.chatArea .msgRow .avatar{
  width: 56px !important;
  height: 56px !important;
  border-radius: 999px !important;
  object-fit: cover !important;
  flex: 0 0 56px !important;
}

/* ============ 4) Colors ALWAYS by speaker (isVisitor/isStudent) ============ */
:root{
  --studentBubble: #2f6fec;
  --studentText:   #ffffff;
  --visitorBubble: #e6e9ef;
  --visitorText:   #0b1220;
}

.chatArea .msgRow.isStudent .bubble{
  background: var(--studentBubble) !important;
  color: var(--studentText) !important;
}
.chatArea .msgRow.isVisitor .bubble{
  background: var(--visitorBubble) !important;
  color: var(--visitorText) !important;
}

/* Fallback colors only when no isVisitor/isStudent exists yet */
.chatArea .msgRow:not(.isVisitor):not(.isStudent).student .bubble{
  background: var(--studentBubble) !important;
  color: var(--studentText) !important;
}
.chatArea .msgRow:not(.isVisitor):not(.isStudent).visitor .bubble{
  background: var(--visitorBubble) !important;
  color: var(--visitorText) !important;
}

/* ============ 5) ID card: hidden means REALLY hidden ============ */
#idCardWrap[hidden]{ display:none !important; }

/* wrapper */
#idCardWrap, .idCardWrap{
  background: transparent !important;
  width: 100% !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* When visible, let it fill most of the bottom half */
#idCardWrap:not([hidden]){
  flex: 1 1 auto !important;
  min-height: 0 !important;
}

/* Card zelf: groter (â‰ˆ2x gevoel) */
.idCard, .idCard.passport{
  background: #ffffff !important;
  color: #0b1220 !important;
  width: min(820px, 96%) !important;
  height: min(420px, 92%) !important;
  border-radius: 14px !important;
  border: 1px solid rgba(0,0,0,0.12) !important;
  box-shadow: 0 10px 24px rgba(0,0,0,0.25) !important;
  padding: 18px !important;
}

/* Geen grijze binnenpanelen */
.idCard *{ background-color: transparent !important; }

/* Text */
.idCard .idRow, .idCard .idFields{ color:#0b1220 !important; }
.idCard .idRow .k{ color: rgba(11,18,32,0.65) !important; font-weight: 700 !important; }

/* Photo */
.idCard .idPhoto{
  width: 140px !important;
  height: 140px !important;
  object-fit: cover !important;
  border-radius: 10px !important;
  border: 2px solid rgba(11,18,32,0.12) !important;
}
