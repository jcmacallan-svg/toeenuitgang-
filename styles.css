/* ==============================
   VEVA — Clean Styles (Fullscreen + WhatsApp UI)
   ============================== */

*{box-sizing:border-box}
html, body, #app { height: 100%; }
html, body{
  margin:0;
  padding:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

:root{
  --bg: #070c16;
  --panel: rgba(255,255,255,.06);
  --panelBorder: rgba(255,255,255,.10);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.65);

  --visitorBubble: rgba(255,255,255,.08);
  --visitorText: #d6d9e2;

  --studentBubble: rgba(25,118,210,.18);
  --studentBorder: rgba(25,118,210,.55);
  --studentText: #4aa3ff;

  --dangerBg: rgba(255,59,59,.14);
  --dangerBorder: rgba(255,59,59,.55);

  --radius: 18px;
  --avatar: 72px;
  --gap: 12px;
}

/* Background */
body{
  background: radial-gradient(1200px 800px at 30% 10%, rgba(30,80,160,.40), var(--bg));
  color: var(--text);
  padding: 12px;
}

/* Containers */
.wrap, .container{
  width: min(1400px, 96vw);
  margin: 0 auto;
  min-height: calc(100vh - 24px);
  display: flex;
  flex-direction: column;
}

/* Topbar */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 12px;
  margin-bottom: 12px;
}
.brand{display:flex;gap:12px;align-items:center}
.logo{
  width:44px;height:44px;border-radius:12px;
  background:rgba(59,130,246,.2);
  display:flex;align-items:center;justify-content:center;
  font-weight:800;color:#93c5fd;
  border:1px solid rgba(59,130,246,.35)
}
.title{font-size:18px;font-weight:800}
.subtitle{font-size:12px;color:var(--muted)}
.meta{font-size:12px;color:var(--muted)}

/* Cards */
.card{
  background: var(--panel);
  border: 1px solid var(--panelBorder);
  border-radius: var(--radius);
  padding: 18px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}

/* Make TRAIN screen fill the remaining space */
#screen-train.card,
#screen-train .card{
  flex: 1 1 auto;
}

/* Typography */
h1{margin:0 0 10px 0;font-size:28px}
h2{margin:0 0 10px 0;font-size:22px}
.small{font-size:12px}
.muted{color:var(--muted)}

/* Form fields */
.field{display:flex;flex-direction:column;gap:6px;margin:10px 0}
label{font-size: 14px; color: var(--muted);}
.field input,.field select,.field textarea{
  border-radius:12px;
  border:1px solid rgba(148,163,184,.25);
  background:#0b1220;
  color: var(--text);
  padding:12px 14px;
  outline:none;
  font-size: 16px;
}
.field input:focus,.field select:focus,.field textarea:focus{border-color:rgba(59,130,246,.7)}

/* Dropdown contrast (important) */
select{ color: var(--text); background:#0b1220; }
select option{ color: var(--text); background:#0b1220; }

/* Buttons */
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.btn{
  border-radius:12px;
  border:1px solid rgba(148,163,184,.25);
  background:#0b1220;
  color:var(--text);
  padding:10px 12px;
  cursor:pointer;
  font-size: 14px;
  font-weight: 600; /* not “super bold” */
}
.btn:hover{border-color:rgba(148,163,184,.5)}
.btn.primary{background:rgba(59,130,246,.2);border-color:rgba(59,130,246,.45)}
.btn.primary:hover{border-color:rgba(59,130,246,.8)}
.btn.danger{
  background: var(--dangerBg) !important;
  border-color: var(--dangerBorder) !important;
  color:#fff !important;
}
.btn.danger:hover{filter:brightness(1.08)}
.hidden{display:none}

/* Train layout */
.trainHead{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  margin-bottom: 10px;
}
.stepTitle{font-size:18px;font-weight:800}
.trainBtns{display:flex;gap:10px;flex-wrap:wrap}

.gridTrain{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 12px;
  align-content: stretch;
  flex: 1 1 auto;
  min-height: 0; /* important for flex+scroll */
}
.panel{
  background:#0b1220;
  border:1px solid rgba(148,163,184,.2);
  border-radius:16px;
  padding:14px;
  min-height: 0;
}
.panelTitle{font-weight:700;color:#cbd5e1}

/* Chat area should grow */
.chatArea{
  display:flex;
  flex-direction:column;
  gap: 12px;
  height: 100%;
  min-height: 0;
}
.chatWrap{
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 14px;
  background: rgba(0,0,0,0.14);
  flex: 1 1 auto;
  min-height: 220px;
  overflow: auto;
}

/* WhatsApp rows */
.visitorRow{
  display:flex;
  gap: var(--gap);
  align-items:flex-start; /* align avatar with bubble */
}
.studentRow{
  display:flex;
  gap: var(--gap);
  align-items:flex-start;
  justify-content:flex-end;
  flex-direction: row-reverse; /* avatar on right */
  width: 100%;
}

/* Avatars same size */
.visitorAvatar,
.studentAvatar{
  width: var(--avatar);
  height: var(--avatar);
  border-radius: 50%;
  object-fit: cover;
  flex: 0 0 var(--avatar);
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
}

.visitorCol,
.studentCol{
  flex: 1 1 auto;
  max-width: calc(100% - (var(--avatar) + 24px));
}

/* Bubbles */
.bubble{
  border-radius:14px;
  padding:12px;
  min-height:54px;
  display:flex;
  align-items:center;
  border:1px solid rgba(255,255,255,.10);
  white-space: pre-wrap;
  line-height: 1.35;
}
#visitorBubble.bubble{
  background: var(--visitorBubble);
  color: var(--visitorText);
}
#studentBubble.bubble.me{
  background: var(--studentBubble);
  border-color: var(--studentBorder);
  color: var(--studentText);
  margin-left:auto;
  max-width: 70%;
}

/* Mood text under visitor bubble */
#visitorMood{
  margin-top: 6px;
  font-size: 13px;
  color: rgba(255,255,255,.70);
  font-style: normal;
}

/* Input bar pinned to bottom of left panel (if your markup is like that) */
.inputBar{
  display:flex;
  gap: 10px;
  align-items:center;
}
#studentInput{
  width: 100%;
  min-height: 44px;
  font-size: 16px;
  padding: 10px 12px;
  border-radius: 12px;
}

/* ID panel (INLINE, not fullscreen) */
#idPanel{ display:none; }
#idPanel.show{
  display:block;
}
#idCanvas{
  width: 100%;
  height: auto;
  max-height: 420px; /* prevents “takes over screen” */
  border-radius:14px;
  border:1px solid rgba(148,163,184,.18);
  background:#f5f5f5;
}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;padding:18px;z-index:9999}
.modal.hidden{display:none !important}
.modalCard{width:min(900px,100%);background:#0f1a2e;border:1px solid rgba(148,163,184,.25);border-radius:16px;padding:16px;box-shadow:0 20px 60px rgba(0,0,0,.45)}
.modalHead{display:flex;justify-content:space-between;align-items:center;gap:10px}
.modalTitle{font-weight:800;font-size:18px}

/* Mobile: single column, ID goes under chat */
@media (max-width:900px){
  .gridTrain{ grid-template-columns: 1fr; }
  #idCanvas{ max-height: 360px; }
}
/* ============================
   FIX: full-height chat + ID panel visibility
   Plak ONDERAAN styles.css
   ============================ */

/* 1) Laat de training grid de hele viewport gebruiken */
.gridTrain{
  min-height: calc(100vh - 140px) !important; /* header + padding marge */
  align-items: stretch !important;
}

/* 2) Maak de LINKER panel (waar chat in zit) een flex-kolom die kan groeien
   (werkt zonder extra IDs in HTML) */
.gridTrain > .panel:first-child{
  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important;
}

/* 3) Chatbox neemt nu de beschikbare ruimte */
.chatWrap{
  flex: 1 1 auto !important;
  min-height: 0 !important;
  max-height: none !important;       /* BELANGRIJK: weg met 360px limiet */
  overflow: auto !important;
}

/* 4) Zet je input/knoppen onderaan (als ze in dezelfde panel zitten) */
.actionBar,
.row.actionBar,
#actionBar{
  margin-top: 12px !important;
}

/* 5) ID panel: standaard verborgen, maar toonbaar via body.show-id */
#idPanel{ display: none; }

/* Als JS body class zet, MOET het zichtbaar worden (geen !important conflicts) */
body.show-id #idPanel{
  display: block !important;
}

/* ID canvas wat groter/leesbaarder maar niet fullscreen */
#idCanvas{
  width: 100% !important;
  height: auto !important;
  max-height: 520px !important;
}

/* Op mobiel: ID panel onder de chat in 1 kolom */
@media (max-width: 900px){
  .gridTrain{ grid-template-columns: 1fr !
