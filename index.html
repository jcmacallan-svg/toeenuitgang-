<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VEVA â€“ Ingang/Uitgang Trainer</title>
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="styles.css" />

  <link rel="icon" href="data:image/svg+xml;charset=utf-8,<svg xmlns=%27http://www.w3.org/2000/svg%27 width=%2764%27 height=%2764%27><rect width=%27100%%27 height=%27100%%27 fill=%27%231b2a44%27/><circle cx=%2732%27 cy=%2726%27 r=%2714%27 fill=%27%237aa2d6%27/><rect x=%2714%27 y=%2742%27 width=%2736%27 height=%2718%27 rx=%279%27 fill=%27%237aa2d6%27/></svg>">
</head>

<body>
<main class="wrap">
  <header class="topbar">
    <div class="brand">
      <div class="logo">VEVA</div>
      <div>
        <div class="title">VEVA â€“ Ingang/Uitgang Trainer</div>
        <div class="subtitle">English checkpoint conversation practice</div>
      </div>
    </div>

    <div class="topActions">
      <div class="meta" id="meta"></div>
      <button class="btn subtle" id="btnTeacher" title="Teacher mode">Docent</button>
    </div>
  </header>

  <!-- Screen 1: Login -->
  <section class="card" id="screen-login">
    <h1>Start</h1>
    <p class="muted">Vul je naam in. Daarna start de oefening.</p>

    <div class="grid2">
      <label class="field">
        <span>Naam leerling</span>
        <input id="studentName" autocomplete="name" placeholder="Vul in je achternaam (bijv. Jansen)" />
      </label>

      <label class="field">
        <span>Groep (optioneel)</span>
        <select id="className">
          <option value="">â€” kies â€”</option>
          <option value="Alpha">Alpha</option>
          <option value="Bravo">Bravo</option>
          <option value="Charlie">Charlie</option>
          <option value="Delta">Delta</option>
        </select>
      </label>
    </div>

    <label class="field">
      <span>Niveau</span>
      <select id="difficulty">
        <option value="Basic">Basic</option>
        <option value="Standard" selected>Standard</option>
        <option value="Advanced">Advanced</option>
      </select>
    </label>

    <div class="row">
      <button class="btn primary" id="btnStart">Start oefening</button>
      <button class="btn" id="btnResetLocal" title="Verwijdert alleen lokaal opgeslagen data">Reset lokaal</button>
    </div>
  </section>

  <!-- Screen 2: Training -->
  <section class="card hidden" id="screen-train">
    <div class="trainHead">
      <div>
        <div class="stepTitle" id="stepTitle">Intake</div>
        <div class="muted" id="stepHelp">Start with 5W/5WH (name, purpose, appointment, who, time, where, subject).</div>
      </div>
      <div class="trainBtns">
        <button class="btn" id="btnHint">Hint</button>
        <button class="btn primary" id="btnDoneStep">I'm done with this step</button>
      </div>
    </div>

    <div class="gridTrain" id="trainGrid">
      <div class="panel">
        <div class="panelTitle">Visitor answer</div>

        <div class="visitorRow">
          <img id="visitorAvatar" class="visitorAvatar" alt="visitor" />
          <div class="visitorCol">
            <div class="bubble" id="visitorBubble">Ask your first questionâ€¦</div>
            <div id="visitorMood" class="visitorMood muted"></div>
          </div>
        </div>

        <div class="studentRow">
          <img id="studentAvatar" class="studentAvatar" alt="student" src="assets/photos/soldier.png" />
          <div class="studentCol">
            <div class="bubble me" id="studentBubble" style="display:none;"></div>
          </div>
        </div>

        <div class="panelTitle mt">Your question</div>
        <div class="row">
          <input id="studentInput" placeholder="Type your question in Englishâ€¦" />
          <button class="btn primary" id="btnSend">Send</button>
          <button class="btn" id="btnMicHold" type="button" title="Hold to talk">ðŸŽ™ Hold to talk</button>
          <span class="micStatus" id="micStatus" aria-live="polite"></span>
        </div>

        <div class="row actionBar">
          <button class="btn" id="btnContactSupervisor" title="Open supervisor 5W briefing (Step 2)">Contact supervisor</button>
          <button class="btn" id="btnReturnVisitor" title="Return to visitor after supervisor response">Return to visitor</button>
          <button class="btn" id="btnGoPersonSearch" title="Proceed to person search / pat-down">Go to person search</button>
          <button class="btn danger" id="btnDenyEntrance" title="Deny entrance at any time">Deny entrance</button>
        </div>

        <div class="muted small">Tip: schrijf de antwoorden in je eigen boekje.</div>

        <div class="divider"></div>
        <div class="row">
          <button class="btn" id="btnNewScenario">New scenario</button>
          <button class="btn" id="btnFinishRun">Finish run</button>
        </div>
      </div>

      <div class="panel" id="idPanel">
      <div class="row" style="justify-content:space-between; align-items:center;">
      <div class="panelTitle">ID Card</div>
        <button class="btn small" id="btnCloseId" type="button">Close ID</button>
      </div>
        <canvas id="idCanvas" width="900" height="560" class="idCanvas"></canvas>
      </div>
  </section>

  <!-- Screen 3: Feedback -->
  <section class="card hidden" id="screen-feedback">
    <h1>Feedback</h1>
    <p class="muted">Hier staan je grootste 3 missers en wat je volgende keer kunt vragen.</p>

    <div class="feedbackBox">
      <h2>Biggest 3 misses</h2>
      <ul id="top3"></ul>
    </div>

    <details class="details" open>
      <summary>All missed items</summary>
      <div class="detailsBody" id="allMisses"></div>
    </details>

    <div class="row">
      <button class="btn" id="btnBackToStart">Back to start</button>
      <button class="btn primary" id="btnDownloadCsv">Download CSV</button>
    </div>
  </section>

  <!-- Supervisor modal -->
  <div class="modal hidden" id="supervisorModal" role="dialog" aria-modal="true">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">Supervisor call (5W briefing)</div>
        <button class="btn" id="btnCloseModal">Close</button>
      </div>

      <p class="muted small">Fill in the 5W briefing (can be in Dutch). Then send to supervisor.</p>

      <div class="grid2">
        <label class="field"><span>Who are you?</span><input id="wWho" placeholder="Naam bezoeker" /></label>
        <label class="field"><span>What are you doing here?</span><input id="wWhat" placeholder="Doel (delivery/inspection/etc.)" /></label>
        <label class="field"><span>With whom is the meeting?</span><input id="wWithWhom" placeholder="Host / contactpersoon" /></label>
        <label class="field"><span>What time is the meeting?</span><input id="wTime" placeholder="Bijv. 10:30" /></label>
        <label class="field"><span>Why is the meeting?</span><input id="wWhy" placeholder="Onderwerp / reden" /></label>
      </div>

      <div class="row">
        <button class="btn primary" id="btnSendSupervisor">Send to supervisor</button>
        <button class="btn primary" id="btnBackToVisitor" type="button">Return to visitor</button>
      </div>

      <div class="divider"></div>
      <div class="muted small" id="supervisorResponse"></div>
    </div>
  </div>

</main>

<script src="config.js"></script>
<script src="app.js"></script>
</body>
</html>
