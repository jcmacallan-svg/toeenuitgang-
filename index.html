<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VEVA Entry Control Trainer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="wrap">
    <header class="topbar">
      <div class="brand">
        <div class="logo">VEVA</div>
        <div>
          <div class="title">Entry Control Trainer (English)</div>
          <div class="subtitle">Static GitHub Pages version — writing practice (no TTS)</div>
        </div>
      </div>
      <div class="meta" id="meta"></div>
    </header>

    <!-- Screen 1: Name -->
    <section class="card" id="screen-login">
      <h1>Start</h1>
      <p class="muted">Vul je naam in. Daarna start de oefening.</p>

      <div class="grid2">
        <label class="field">
          <span>Naam leerling</span>
          <input id="studentName" autocomplete="name" placeholder="Bijv. Lisa" />
        </label>
        <label class="field">
          <span>Klas/groep (optioneel)</span>
          <input id="className" placeholder="Bijv. VEVA-2A" />
        </label>
      </div>

      <label class="field">
        <span>Niveau</span>
        <select id="difficulty">
          <option value="Basic">Basic</option>
          <option value="Standard" selected>Standard</option>
          <option value="Advanced">Advanced</option>
        </select>
      </label>

      <div class="row">
        <button class="btn primary" id="btnStart">Start oefening</button>
        <button class="btn" id="btnResetLocal" title="Verwijdert alleen lokaal opgeslagen data">Reset lokaal</button>
      </div>

      <details class="details">
        <summary>Docent: logging & telling “wie heeft geoefend”</summary>
        <div class="detailsBody">
          <p>GitHub Pages is statisch. Wil je centraal kunnen zien wie geoefend heeft en hoe vaak, dan heb je een extern logpunt nodig (bijv. Google Sheet via Apps Script of Supabase/Firebase).</p>
          <p>In deze versie kun je:</p>
          <ul>
            <li><b>Zonder backend</b>: alleen lokaal (op het apparaat) bijhouden.</li>
            <li><b>Met backend</b>: stel in <code>config.js</code> een endpoint in om starts/finishes te loggen.</li>
          </ul>
        </div>
      </details>
    </section>

    <!-- Screen 2: Training -->
    <section class="card hidden" id="screen-train">
      <div class="trainHead">
        <div>
          <div class="stepTitle" id="stepTitle"></div>
          <div class="muted" id="stepHelp"></div>
        </div>
        <div class="trainBtns">
          <button class="btn" id="btnHint">Hint</button>
          <button class="btn primary" id="btnDoneStep">I'm done with this step</button>
        </div>
      </div>

      <div class="gridTrain">
        <div class="panel">
          <div class="panelTitle">Visitor answer (shown briefly)</div>
          <div class="bubble" id="visitorBubble">Ask your first question…</div>

          <div class="panelTitle mt">Your question</div>
          <div class="row">
            <input id="studentInput" placeholder="Type your question in English…" />
            <button class="btn primary" id="btnSend">Send</button>
          </div>
          <div class="row actionBar">
            <button class="btn" id="btnContactSupervisor" title="Open supervisor 5W briefing (Step 2)">Contact supervisor</button>
            <button class="btn" id="btnReturnVisitor" title="Return to visitor after supervisor response">Return to visitor</button>
            <button class="btn" id="btnGoPersonSearch" title="Proceed to person search / pat-down">Go to person search</button>
          </div>

          <div class="muted small">Tip: schrijf de antwoorden in je eigen boekje.</div>

          <div class="divider"></div>
          <div class="row">
            <button class="btn" id="btnNewScenario">New scenario</button>
            <button class="btn" id="btnFinishRun">Finish run</button>
          </div>
        </div>

        <div class="panel">
          <div class="panelTitle">ID Card</div>
          <canvas id="idCanvas" width="900" height="560" class="idCanvas"></canvas>
          <div class="muted small">De ID wordt pas gevuld naarmate de juiste vragen zijn gesteld.</div>
        </div>
      </div>
    </section>

    <!-- Screen 3: Feedback -->
    <section class="card hidden" id="screen-feedback">
      <h1>Feedback</h1>
      <p class="muted">Hier staan je grootste 3 missers en wat je volgende keer kunt vragen.</p>

      <div class="feedbackBox">
        <h2>Biggest 3 misses</h2>
        <ul id="top3"></ul>
      </div>

      <details class="details" open>
        <summary>All missed items</summary>
        <div class="detailsBody" id="allMisses"></div>
      </details>

      <div class="row">
        <button class="btn" id="btnBackToStart">Back to start</button>
        <button class="btn primary" id="btnDownloadCsv">Download CSV</button>
      </div>
    </section>

    <footer class="footer">
      <span class="muted small">Hosted on GitHub Pages (static). No TTS/voice. For central tracking: configure an external endpoint in <code>config.js</code>.</span>
    </footer>
  
    <!-- Supervisor modal (5W briefing) -->
    <div class="modal hidden" id="supervisorModal" role="dialog" aria-modal="true">
      <div class="modalCard">
        <div class="modalHead">
          <div class="modalTitle">Supervisor call (5W briefing)</div>
          <button class="btn" id="btnCloseModal">Close</button>
        </div>
        <p class="muted small">Fill in the 5W briefing (can be in Dutch). Then send to supervisor.</p>

        <div class="grid2">
          <label class="field"><span>Who are you?</span><input id="wWho" placeholder="Naam bezoeker" /></label>
          <label class="field"><span>What are you doing here?</span><input id="wWhat" placeholder="Doel (delivery/inspection/etc.)" /></label>
          <label class="field"><span>With whom is the meeting?</span><input id="wWithWhom" placeholder="Host / contactpersoon" /></label>
          <label class="field"><span>What time is the meeting?</span><input id="wTime" placeholder="Bijv. 10:30" /></label>
          <label class="field"><span>Why is the meeting?</span><input id="wWhy" placeholder="Onderwerp / reden" /></label>
        </div>

        <div class="row">
          <button class="btn primary" id="btnSendSupervisor">Send to supervisor</button>
        </div>

        <div class="divider"></div>
        <div class="muted small" id="supervisorResponse"></div>
      </div>
    </div>

</main>

  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
